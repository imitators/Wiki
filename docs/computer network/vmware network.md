# 网络连接模式

## bridged 模式

bridged 网络拓扑图:

```
--------------------      --------------------                   -------
|        | 虚拟网卡 | ---- | 虚拟交换机 VMnet0 | ---- 虚拟网桥 ---- | 网络 |
|        -----------      --------------------                   -------
| 虚拟机            |
--------------------
```

VMnet0: 用于虚拟桥接网络下的虚拟交换机。

在桥接 (bridged) 模式下，宿主机物理网卡（主机网卡）和虚拟机网卡通过 VMnet0 虚拟交换机进行桥接，物理网卡和虚拟网卡在拓扑图上处于同等地位，物理网卡和虚拟网卡处于同一网段。至于是桥接到宿主机的虚拟网卡还是无线网卡取决于宿主机的上网模式。

该模式下物理网卡和虚拟网卡的IP地址处于同一个网段，子网掩码、网关、DNS等参数都相同。

本地物理网卡和虚拟网卡通过 VMnet0 虚拟交换机进行桥接，虚拟机和主机位于 VMnet0 这个交换机的两端，这个交换机使得两端处在同一个网段中。每个虚拟系统相当于一台独立的主机，桥接模式下的主机和虚拟机相当于同一个局域网中的两台电脑。

### 设置方法

1. 在本地连接或者无线网连接的属性中勾选 VMware bridge protocol
2. VMware 网络连接选择桥接模式
3. 编辑-虚拟网络编辑器-更改设置-VMnet信息勾选桥接模式
4. 已桥接至处勾选主机物理网卡名字
5. 虚拟机设置自动获取IP(也可也手动设置成同网段IP)

## HOST-ONLY 模式

```
--------------------      ------------------------      --------------------------
|        | 虚拟网卡 | ---- | VMnet1 192.168.143.1 | ---- | 宿主机虚拟网卡          |
|        -----------      ------------------------      --------------------------    ----------------------
| 虚拟机            |                                    | 192.168.1.2 | 物理网卡 | --- | 路由器 192.168.1.1 |
| 192.168.143.100  |                                    --------------------------    ----------------------
--------------------
```

在仅主机 (HOST-ONLY) 模式下，整个虚拟网络是一个全封闭的状态，各个虚拟机通过 VMnet1 互相通信，虚拟机也可以与宿主机互相通信。

因为虚拟机所处的虚拟网络与宿主机所处的真实网络实际上是被隔离开的，这时宿主机不再为虚拟机提供网络服务，所以虚拟机不能访问外部网络。

### 设置方法

在网络连接里选择 host-only

## NAT 模式

NAT 网络拓扑图:

```
                                          -------------------
                                    ----- | 虚拟 DHCP 服务器 |
                                    |     -------------------
                                    |
--------------------      --------------------      -------------      --------
|        | 虚拟网卡 | ---- | 虚拟交换机 VMnet8 | ---- | NAT 服务器 | ---- | 网络 |
|        -----------      --------------------      -------------      --------
| 虚拟机            |
--------------------
```

VMnet8 (VMware Network Adapter VMnet8): 用于 Host 与 NAT 虚拟网络通讯的虚拟网卡。

在 NAT 模式下，VMnet8 网卡仅仅用于和 VMnet8 网段通信，它并不为 VMnet8 网段提供路由功能，处于虚拟 NAT 网络下的 Guest 是使用虚拟的 NAT 服务器连接 Internet 的。

当禁用 VMnet8 虚拟网卡后，Host 与 Guest 之间的通讯被切断，但是 Guest 仍然可以上网。

该模式下的虚拟机 TCP/IP 配置信息是由 VMnet8 虚拟网络的 DHCP 服务器提供的，无法进行手工修改，因此虚拟机也无法和本局域网中的其他真实主机通信。

### 设置方法

1. 开启 VMware NAT Service 和 Vmware DHCP Service
2. 网络连接选择 NAT 模式