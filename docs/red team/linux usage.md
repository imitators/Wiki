# Linux 使用

## 文件目录及其含义

系统启动必须：

- /boot：存放的启动 Linux 时使用的**内核文件**，包括连接文件以及镜像文件。
- /etc：etc 是 Etcetera 的缩写，存放所有的系统需要的**配置文件**和子目录列表，更改目录下的文件可能会导致系统不能启动。
- /lib：lib 是 Library 的缩写，存放**基本代码库**（比如c++库），其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。
- /sys： 这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统 sysfs 。sysfs文件系统集成了下面3种文件系统的信息：针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中

指令集合：

- /bin：bin 是 Binaries 的缩写，存放着**最常用的程序和指令**
- /sbin：sbin 是 Superuser Binaries (超级用户的二进制文件) 的缩写，只有系统管理员能使用的程序和指令。

外部文件管理：

- /dev ：dev 是 Device 的缩写，存放的是Linux的**外部设备**。注意：在Linux中访问设备和访问文件的方式是相同的。
- /mnt：临时挂载**别的文件系统**的，我们可以将光驱挂载在`/mnt`上，然后进入该目录就可以查看光驱里的内容了。
- /media：类windows的其他设备，例如U盘、光驱等等，识别后linux会把设备放到这个目录下。

临时文件：

- /tmp：tmp 是 temporary(临时) 的缩写，该目录用于存放一些临时文件。
- /run：run 是一个**临时文件系统**，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。
- /lost+found：一般情况下为空的，系统非法关机后，这里就存放一些文件。

账户：

- /root：系统管理员的用户主目录。
- /home：用户的主目录，以用户的账号命名的。
- /usr：usr 是 Unix Shared Resources(共享资源) 的缩写，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。
- /usr/bin：系统用户使用的应用程序与指令。
- /usr/sbin：超级用户使用的比较高级的管理程序和系统守护程序。
- /usr/src：内核源代码默认的放置目录。

运行过程中要用：

- /var：var 是 variable(变量) 的缩写，存放经常修改的数据，比如程序运行的日志文件（/var/log 目录下）。
- /proc：管理内存空间虚拟的目录，是系统内存的映射，我们可以直接访问这个目录来，获取系统信息。这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件来做修改。

扩展：

- /opt：默认是空的，我们安装额外软件可以放在这个里面。
- /srv：存放服务启动后需要提取的数据（不用服务器就是空）

## 设置 root 默认密码

```
sudo passwd root
```

## 查看环境变量

`env`：env 用于列出所有环境变量

`echo`：echo 单独使用可以显示所有环境变量

`echo $PATH`：echo 加上参数能显示指定的环境变量(e.g. 显示 PATH 环境变量)

## 源

源文件位置 `/etc/apt/source.list`

## 包管理软件

Advanced Packaging Tool（apt）是Linux下的一款安装包管理工具，是一个C/S系统。


??? note "apt 工作原理"
    apt 工作时，会在服务器上先复制所有DEB包（DEB 是 Debian 软件包格式的文件扩展名），然后使用 genbasedir（APT的分析工具）根据每个 DEB 包的包头（Header）信息对所有的 DEB 包进行分析，并将该分析结果记录在一个文件中，这个文件称为 DEB 索引清单，APT服务器的DEB索引清单置于base文件夹内。

    一旦 APT 服务器内的 DEB 有所变动，一定要使用 genbasedir 产生新的 DEB 索引清单。客户端在进行安装或升级时先要查询 DEB 索引清单，从而可以获知所有具有依赖关系的软件包，并一同下载到客户端以便安装。

    当客户端需要安装、升级或删除某个软件包时，客户端计算机取得 DEB 索引清单压缩文件后，会将其解压置放于 `/var/state/apt/lists/`，而客户端使用 `apt-get install` 或 `apt-get upgrade` 命令的时候，就会将这个文件夹内的数据和客户端计算机内的 DEB 数据库比对，知道哪些 DEB 已安装、未安装或是可以升级的。

apt 命令的几个缺省路径：

- 下载的软件存放位置：/var/cache/apt/archives
- 安装后软件默认位置：/usr/share
- 可执行文件位置：/usr/bin
- 配置文件位置：/etc
- 库文件位置：/usr/lib

Ubuntu 是基于 Debain 的 Linux 系统。Debain的软件管理使用 apt
和 dpkg。

dpkg 是 debain package 的简写，是一个底层的包管理工具。dpkg 无法像apt一样处理依赖关系，不过能针对某个包进行操作。

不同点：

- apt是会解决和安装模块的依赖问题，并会咨询软件仓库，是在线安装。
- dpkg只能安装本地的deb文件，不会关心Ubuntu的软件仓库内的软件，不会解决模块的依赖关系。
- 两者的区别是dpkg绕过apt包管理数据库对软件包进行操作，所以你用dpkg安装过的软件包用apt可以再安装一遍，系统不知道之前安装过了，将会覆盖之前dpkg的安装。

使用如下：

`dpkg -l`：查看软件的状态

`dpkg -P`：卸载软件

## named pipe

管道符用于（类）Unix系统的进程间通信(IPC, inter-process communication)。yousuobutong

在 Unix 系统中，管道也是一个文件。创建方法为 `mkfifo()` 或 `mknod()`。

两个进程可以按名称访问命名管道，其中一个进程作为写入器打开，另一个作为读取器打开。

在win中这个概念的含义不同。